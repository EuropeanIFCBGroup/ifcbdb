{% extends 'base.html' %} {% block breadcrumbs %}
<li class="breadcrumb-item"><a class="black-text" href="{% url 'dataset' dataset.name %}">{{ dataset.name }}</a></li>
{% endblock %} {% block content %}
<div class="row d-flex justify-content-start">
    <div class="pl-3">
        <h1>{{ dataset.title }}</h1>
    </div>
    {% if user.is_authenticated %}
    <div>
        <a href="#" class="btn btn-sm btn-primary ml-3">Configure</a>
    </div>
    {% endif %}
</div>
<hr class="my-3">
<div class="row py-3 px-3">
    <div class="col-sm-12">

        <ul class="nav nav-tabs" id="DataSetTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="DataVolume-tab" data-toggle="tab" href="#DataVolume" role="tab" aria-controls="DataVolume" aria-selected="true">Data Volume</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="TriggerRate-tab" data-toggle="tab" href="#TriggerRate" role="tab" aria-controls="TriggerRate" aria-selected="false">Trigger Rate</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="VolumeImaged-tab" data-toggle="tab" href="#VolumeImaged" role="tab" aria-controls="VolumeImaged" aria-selected="false">Volume Imaged</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="Instrument-tab" data-toggle="tab" href="#Instrument" role="tab" aria-controls="Instrument" aria-selected="false">Instrument</a>
            </li>
        </ul>

        <div class="tab-content" id="DataSetTabContent">
            <div class="tab-pane fade show active" id="DataVolume" role="tabpanel" aria-labelledby="DataVolume-tab">
                <div id="timeline-data" style="width:100%;height:250px;"></div>
            </div>
            <div class="tab-pane fade" id="TriggerRate" role="tabpanel" aria-labelledby="TriggerRate-tab">
                <div id="triggerrate-data" style="width:100%;height:250px;"></div>
            </div>
            <div class="tab-pane fade" id="VolumeImaged" role="tabpanel" aria-labelledby="VolumeImaged-tab">Tab pane 3 content.</div>
            <div class="tab-pane fade" id="Instrument" role="tabpanel" aria-labelledby="Instrument-tab">Tab pane 3 content.</div>
        </div>
    </div>
</div>
<div class="row py-2 card-deck">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <div class="row col justify-content-between">

                    <form class="form-inline my-2 my-lg-0">
                        <a class="trigger" href="#"><span class="waves-effect"><i class="fas fa-arrow-circle-left fa-2x"></i></span></a>
                    </form>
                    <span class="h4-responsive"><strong>Bin:</strong> <small class="text-muted">abc124asdfakljsdaf</small></span>
                    <form class="form-inline my-2 my-lg-0">
                        <a class="trigger" href="#"><span class="waves-effect"><i class="fas fa-arrow-circle-right fa-2x"></i></span></a>
                    </form>

                </div>
            </div>

            <div class="card-body text-center">
                <img class="img-fluid" id="bin-mosaic" src="data:image/png;base64,{{image}}" data-toggle="modal" data-target="#exampleModalCenter" />
                <br clear="all" />
            </div>
            <div class="card-footer text-center">
                <nav aria-label="Page navigation example" class="text-center">
                    <ul class="pagination pg-blue justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" tabindex="-1">Previous</a>
                        </li>
                        <li class="page-item"><a class="page-link">1</a></li>
                        <li class="page-item active">
                            <a class="page-link">2 <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="page-item"><a class="page-link">3</a></li>
                        <li class="page-item">
                            <a class="page-link">Next</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h2 class="h4-responsive">Location</h2>
            </div>
            <div class="card-body">
                <div id="mapid" style="height:600px;"></div>
            </div>
            <div class="card-footer">
                <p>41 north, 82 east (41.31, -70.39), depth 5m</p>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">

    <!-- Add .modal-dialog-centered to .modal-dialog to vertically center the modal -->
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">


        <div class="modal-content">
            <div class="modal-body">
                <img class="img-fluid" id="bin-mosaic" src="data:image/png;base64,{{image}}" />
            </div>
        </div>
    </div>
</div>

{% endblock %} {% block scripts %}
<script>
    Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv", function(err, rows) {
        function unpack(rows, key) {
            return rows.map(function(row) {
                return row[key];
            });
        }
        var trace1 = {
            type: "bar",
            name: 'AAPL High',
            x: unpack(rows, 'Date'),
            y: unpack(rows, 'AAPL.High'),
            line: {
                color: '#17BECF'
            }
        }

        var data = [trace1];

        var layout = {
            title: 'Basic Time Series',
        };

        Plotly.newPlot('timeline-data', data, layout, {
            responsive: true,
            displaylogo: false
        });
    })
</script>
<script>
    var trace3 = {
        x: [1, 2, 3, 4],
        y: [10, 15, 13, 17],
        type: 'scatter'
    };

    var data2 = [trace3];

    Plotly.newPlot('triggerrate-data', data2, {
        responsive: true,
        displaylogo: false
    });
</script>
<script>
    $("#bin-details").click(function(e) {
        var url = "{% url 'bin' dataset.name '__BIN_PID__' %}";
        var pid = $("#bin-switcher").val();

        location.href = url.replace("__BIN_PID__", pid);
    });

    $(function() {
        // TODO: Fill in proper values and a real default starting location
        var map = createMap(41.5507768, -70.6593102);
    });
</script>
{% endblock %}